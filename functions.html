<!DOCTYPE html>
<html>
<head>
    <title>Function Examples</title>
    <script src="Sprockets.js"></script>
    <script>
	var int = 0;
		
        function fn() {
		for(var i = 0, length = 10; i < length; i++) {
			int += i;
		}
		console.log(int);
		return int;
        }
	
	var handle = new Sprockets.Html(window);
	
        handle.subscribe("load", function () {
		var action = new Sprockets.Function(fn, {
			done: function(result) { console.log("done with: " + result); },
			error: function(error) { console.log(error); },
			always: function() { console.log("always"); }
		});

		action();
		var delayed = action.delay(1000);
		var result = delayed();
		result.dispose();
        });
    </script>
</head>
<body>
</body>
</html>
